<!DOCTYPE html>
<html>
<head>
	<title>My Website</title>
</head>
<body>
	<h1>My Website</h1>
	<form id="prediction-form">
		<label for="feature_column_a">Feature A:</label>
		<input type="text" id="feature_column_a" name="feature_column_a" required>
		<br>
		<label for="feature_column_b">Feature B:</label>
		<input type="text" id="feature_column_b" name="feature_column_b" required>
		<br>
		<button type="submit">Predict</button>
	</form>
	<div id="prediction-result"></div>

	<script>
		const form = document.getElementById('prediction-form');
		const resultDiv = document.getElementById('prediction-result');
		form.addEventListener('submit', function(event) {
			event.preventDefault();
			const featureA = document.getElementById('feature_column_a').value;
			const featureB = document.getElementById('feature_column_b').value;

			const inputData = {
				"instances": [
					{"feature_column_a": featureA, "feature_column_b": featureB}
				]
			};

			const endpointId = "6567598456985092096";
			const projectId = "my-project-1-ece-528";
			const accessToken = "4/0AVHEtk73-YOVwkFPA42iqfsmQjdl_KkBDT9H5Z3LapdyIwKZhkzPAb4y_L6cvKb6A_kxSA";

			const request = new XMLHttpRequest();
			request.open('POST', `https://us-central1-aiplatform.googleapis.com/v1/projects/${projectId}/locations/us-central1/endpoints/${endpointId}:predict`);
			request.setRequestHeader('Authorization', `Bearer ${accessToken}`);
			request.setRequestHeader('Content-Type', 'application/json');
			request.onload = function() {
				if (request.status === 200) {
					const response = JSON.parse(request.responseText);
					const prediction = response.predictions[0];
					resultDiv.innerText = `The predicted value is ${prediction}`;
				} else {
					resultDiv.innerText = 'Error';
				}
			};
			request.onerror = function() {
				resultDiv.innerText = 'Error';
			};
			request.send(JSON.stringify(inputData));
		});
	</script>
</body>
</html>
